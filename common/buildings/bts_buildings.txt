bts_building_covenant_sanctum = {
	base_buildtime = @b3_time

	category = government

	empire_limit = {
		base = 1
	}

	potential = {
		host_has_dlc = "Utopia"
		owner = { has_country_flag = bts_covenant_rank_1 }
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		NOT = {
			owner = { has_country_flag = bts_covenant_rank_1 }
		}
	}

	planet_modifier = {
		job_telepath_add = @bts_covenant_sanctum_telepath_jobs
	}

	country_modifier = {
		shroud_delve_cooldown = @bts_covenant_sanctum_shroud_cooldown_mult
		ship_windup_mult = @bts_covenant_sanctum_ship_windup_mult
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			exotic_gases = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
			exotic_gases = @b3_rare_upkeep
		}
	}

	triggered_desc = {
		text = job_telepath_effect_desc
	}
}

# Colony
bts_shroud_entity_core_1 = {
	capital = yes
	can_build = no
	can_demolish = no
	can_be_ruined = no
	can_be_disabled = no
	position_priority = 0
	category = government

	potential = {
		is_planet_class = pc_bts_shroud_entity
	}
	upgrades = {
		bts_shroud_entity_core_2
	}

	planet_modifier = {
		planet_housing_add = 10
		job_bts_new_add = 10
	}
	resources = {
		category = planet_buildings
		upkeep = {
			energy = 1
		}
	}

	# inline_script = {
	# 	script = buildings/on_all_capital_buildings
	# }
}

# Planetary Administration
bts_shroud_entity_core_2 = {
	base_buildtime = @b2_time
	capital = yes
	can_build = no
	can_demolish = no
	can_be_ruined = no
	can_be_disabled = no
	position_priority = 0
	category = government

	destroy_trigger = {
		count_owned_pop = { limit = { has_job = bts_new } count < 10 }
	}

	convert_to = {
		bts_shroud_entity_core_1
	}

	potential = {
		is_planet_class = pc_bts_shroud_entity
	}
	allow = {
		count_owned_pop = { limit = { has_job = bts_new } count >= 10 }
	}
	upgrades = {
		bts_shroud_entity_core_3
	}

	planet_modifier = {
		planet_housing_add = 25
		job_bts_new_add = 25
	}
	resources = {
		category = planet_buildings
		upkeep = {
			energy = 1
		}
	}

	# inline_script = {
	# 	script = buildings/on_all_capital_buildings
	# }

	# prerequisites = {
	# 	"tech_planetary_government"
	# }

	# show_tech_unlock_if = {
	# 	is_regular_empire = yes
	# }
}

bts_shroud_entity_core_3 = {
	base_buildtime = @b3_time
	capital = yes
	can_build = no
	can_demolish = no
	can_be_ruined = no
	can_be_disabled = no
	position_priority = 0
	category = government

	destroy_trigger = {
		count_owned_pop = { limit = { has_job = bts_new } count < 25 }
	}

	convert_to = {
		bts_shroud_entity_core_2
	}

	potential = {
		is_planet_class = pc_bts_shroud_entity
	}
	allow = {
		count_owned_pop = { limit = { has_job = bts_new } count >= 25 }
	}
	upgrades = {
		bts_shroud_entity_core_4
	}

	planet_modifier = {
		planet_housing_add = 50
		job_bts_new_add = 50
	}
	resources = {
		category = planet_buildings
		upkeep = {
			energy = 1
		}
	}

	# inline_script = {
	# 	script = buildings/on_all_capital_buildings
	# }

	# prerequisites = {
	# 	"tech_planetary_government"
	# }

	# show_tech_unlock_if = {
	# 	is_regular_empire = yes
	# }
}

bts_shroud_entity_core_4 = {
	base_buildtime = @b3_time
	capital = yes
	can_build = no
	can_demolish = no
	can_be_ruined = no
	can_be_disabled = no
	position_priority = 0
	category = government

	destroy_trigger = {
		count_owned_pop = { limit = { has_job = bts_new } count < 50 }
	}

	convert_to = {
		bts_shroud_entity_core_3
	}


	potential = {
		is_planet_class = pc_bts_shroud_entity
	}
	allow = {
		count_owned_pop = { limit = { has_job = bts_new } count >= 50 }
	}

	planet_modifier = {
		planet_housing_add = 100
		job_bts_new_add = 100
	}
	resources = {
		category = planet_buildings
		upkeep = {
			energy = 1
		}
	}

	# inline_script = {
	# 	script = buildings/on_all_capital_buildings
	# }

	# prerequisites = {
	# 	"tech_planetary_government"
	# }

	# show_tech_unlock_if = {
	# 	is_regular_empire = yes
	# }
}