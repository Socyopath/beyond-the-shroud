$NAME$ = {
	sound = event_energy_field
	icon = $ICON$
    owned_planets_only = no

	resources = {
		category = decisions
		cost = {

		}
	}

	potential = {
        is_planet_class = pc_bts_shroud_rift
		exists = solar_system.owner
        solar_system.owner = {
            $COUNTRY_POTENTIAL$
        }
	}

    allow = {
        solar_system = {
            owner = {
                NOT = {
                    has_modifier = bts_crisis_ritual_coolodwn
                }
                if = {
                    limit = { $CUSTOM_COST_TRIGGER$ }
                    bts_crisis_has_thrall = {
                        COST = $CUSTOM_THRALL_COST$
                    }
                }
                else = {
                    bts_crisis_has_thrall = {
                        COST = $THRALL_COST$
                    }
                }
            }
        }
    }

	effect = {
        custom_tooltip = $DESC$
        solar_system.owner = {
            if = {
                limit = { $CUSTOM_COST_TRIGGER$ }
                custom_tooltip_with_params = {
                    description = "bts_crisis_ritual_cost_tooltip"
                    description_parameters = {
                        "COST" = $CUSTOM_THRALL_COST$
                    }
                }
                hidden_effect = {
                    bts_effect_consume_thrall = { COUNT = $CUSTOM_THRALL_COST$ }
                }
            }
            else = {
                custom_tooltip_with_params = {
                    description = "bts_crisis_ritual_cost_tooltip"
                    description_parameters = {
                        "COST" = $THRALL_COST$
                    }
                }
                hidden_effect = {
                    bts_effect_consume_thrall = { COUNT = $THRALL_COST$ }
                } 
            }
            add_modifier = {
                modifier = "bts_crisis_ritual_coolodwn"
                days = $COOLDOWN$
                time_multiplier = value:scripted_modifier_mult|MODIFIER|bts_crisis_ritual_coolodwn_mult|
            }
        }
    
        hidden_effect = {
            root.solar_system.owner = {
                fire_on_action = { 
                    on_action = on_bts_ritual
                    scopes = { 
                        from = root
                    } 
                }
                country_event = {
                    id = $SHROUD_RIFT_EVENT$
                    scopes = {
                        from = root
                    }
                }
            }
        }
	}
}
