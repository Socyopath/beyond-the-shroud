bts_crisis_pact_4_decision_summon = {
	sound = event_energy_field
	icon = bts_decision_crisis_dagon_summon
    owned_planets_only = yes

	potential = {
        OR = {
            is_planet_class = pc_ocean
            is_planet_class = pc_tropical
            is_planet_class = pc_continental
        }
        
        exists = owner
        owner = {
            has_modifier = bts_crisis_pact_4
        }
        NOT = { has_planet_flag = leviathan_summoned_by_@owner }
	}

	effect = {
        custom_tooltip = bts_crisis_pact_4_decision_summon_effects
        hidden_effect = {
            set_planet_flag = leviathan_summoned_by_@owner
            create_fleet = {
                name = bts_crisis_dagon_fleet_name
                settings = {
                    can_upgrade = no
                    can_change_composition = no
                    can_change_leader = no
                    uses_naval_capacity = no
                    spawn_debris = no
                    is_boss = yes
                }
                effect = {
                    set_owner = root.owner
                    create_ship = {
                        name = bts_crisis_dagon_ship_name
                        design = "bts_crisis_dagon_design"
                        effect = {
                            set_ship_flag = bts_dagon_pact_@owner
                        }
                    }
                    set_location = {
                        target = root
                    }
                }
            }
        }

	}
}

bts_crisis_pact_4_decision_convert = {
	sound = event_energy_field
	icon = bts_decision_crisis_dagon_rain
    owned_planets_only = yes

	potential = {
        NOR = { 
            is_planet_class = pc_ocean
            is_planet_class = pc_tropical
            is_planet_class = pc_continental
        }
        exists = owner
        owner = {
            has_modifier = bts_crisis_pact_4
        }
        NOT = {
            any_targeting_situation = {
                is_situation_type = situation_bts_crisis_dagon_convert
            }
        }
	}

	effect = {
        owner = {
            start_situation = {
                type = situation_bts_crisis_dagon_convert
                target = root
            }
        }
	}
}